<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>Version Control Guide by Igor Gorlov</title>
</head>

<body>
	<header>
		<h1 align="center">
			<b><u>Version Control Guide by Igor Gorlov</u></b>
		</h1>
		<p>
			In my work, I use <a href="https://git-scm.com"><strong>Git</strong></a> as the only version control system.
			All my projects are Git repositories remotely hosted on
			<a href="https://github.com"><strong>GitHub</strong></a> under
			<a href="https://github.com/igor-gorlov"><strong>Igor Gorlov personal account</strong></a>.
		</p>
		<nav>
			<h2 align="center" id="contents">Contents</h2>
			<ul>
				<li>
					<p id="contents-commit-messages">
						<a href="#commit-messages">Commit Messages</a>
					</p>
					<ul>
						<li>
							<p id="contents-commit-messages-subject">
								<a href="#commit-messages-subject">Subject Line</a>
							</p>
						</li>
						<li>
							<p id="contents-commit-messages-body">
								<a href="#commit-messages-body">Body</a>
							</p>
						</li>
						<li>
							<p id="contents-commit-messages-footer">
								<a href="#commit-messages-footer">Footer</a>
							</p>
						</li>
					</ul>
				</li>
				<li>
					<p id="contents-branching">
						<a href="#branching">Branching</a>
					</p>
					<ul>
						<li>
							<p id="contents-branching-terminology">
								<a href="#branching-terminology">Terminology</a>
							</p>
						</li>
						<li>
							<p id="contents-branching-overview">
								<a href="#branching-overview">Overview</a>
							</p>
						</li>
						<li>
							<p id="contents-branching-encapsulation">
								<a href="#branching-encapsulation">Encapsulation Branches</a>
							</p>
						</li>
						<li>
							<p id="contents-branching-release">
								<a href="#branching-release">Release Branches</a>
							</p>
						</li>
					</ul>
				</li>
			</ul>
		</nav>
	</header>
	<main>
		<section>
			<h2 align="center" id="commit-messages">
				<a href="#contents-commit-messages">Commit Messages</a>
			</h2>
			<p>
				A well-formed commit message consists of a mandatory <strong>subject line</strong>, an optional
				<strong>body</strong> and an optional <strong>footer</strong>. All these three parts are separated from
				each other by <strong><u>one</u>&nbsp;empty&nbsp;line</strong>. The whole message should be wrapped to
				<strong>72</strong> columns.
			</p>
			<p>In the next subsections, we will consider each part of a commit message in detail.</p>
			<section>
				<h3 align="center" id="commit-messages-subject">
					<a href="#contents-commit-messages-subject">Subject Line</a>
				</h3>
				<p>
					A subject line is intended to express a <strong>brief summary</strong> of the commit, which may be
					used by various developer tools and services, including (but not limiting to) the GitHub web
					interface and Git itself. In many cases, the only thing that is shown in a commit log being viewed
					by some third-party programmer will be your subject line. Therefore, you have to make it concise and
					abstract, letting a reader to get the high-level sense of the changes represented by this commit.
					Unless it is really necessary, do <strong>not</strong> mention raw filenames in the subject line -
					use more abstract entities from the project architecture instead (for example, module names).
				</p>
				<p>Despite the hard length limit, a subject line has its own internal structure:</p>
				<code>
					&lt;<i>type</i>&gt;[ &lt;<i>scope</i>&gt;]: &lt;<i>description</i>&gt;
				</code>
				<p>
					Here, &lt;type&gt; is an identifier denoting the current commit type, &lt;scope&gt; is an optional
					name of the architectural entity this commit is related to, &lt;description&gt; is a very brief
					summary of the changes.
				</p>
				<p>All possible commit types are listed in the table below.</p>
				<table>
					<caption>Commit types</caption>
					<tr>
						<th>Identifier</th>
						<th>Name</th>
						<th>Description</th>
					</tr>
					<tr>
						<td>fix</td>
						<td>Fix</td>
						<td>Fixes a bug or addresses an issue</td>
					</tr>
					<tr>
						<td>feat</td>
						<td>Feature</td>
						<td>Adds new functionality</td>
					</tr>
					<tr>
						<td>mod</td>
						<td>Modification</td>
						<td>
							Changes existing functionality in order to get a new behavior, but <strong>not</strong> to
							fix a bug
						</td>
					</tr>
					<tr>
						<td>opt</td>
						<td>Optimization</td>
						<td>
							Reduces the amount of resources needed for execution of the code, such as CPU time, memory
							consumption, binary size etc.
						</td>
					</tr>
					<tr>
						<td>refactor</td>
						<td>Refactoring</td>
						<td>Restructures the code for readability without any impact on its semantics</td>
					</tr>
					<tr>
						<td>format</td>
						<td>Code Formatting</td>
						<td>Changes formatting of the code, but does <strong>not</strong> affect its meaning at all</td>
					</tr>
				</table>
				<p>
					A scope can be denoted by an arbitrary <strong>Git-cased</strong> name transparently related to one
					of the structural units of the project. If the chosen unit is nested (is a part of a larger unit),
					you can create a hierarchical name using <strong>forward&nbsp;slash</strong> (/) as a separator;
					such name will look like a filepath, although it hardly ever has something to do with real file
					system. If the chosen unit implies the whole project (that is, represents the topmost level of the
					hierarchy), a scope name should be omitted.
				</p>
				<p>
					A description is here to answer the question "<strong>what?</strong>" instead of
					"<strong>why?</strong>". Write in a few words what exactly was done, and leave the reasons (if any)
					for the message body. Please note that you have to use an <strong>imperative mood</strong> within
					the description: write it in the <strong>present tense</strong>. Also do <strong>not</strong> start
					the description with a capital letter and do <strong>not</strong> finish it with a period (.).
				</p>
				<section>
					<h4 align="center">Subject line examples</h4>
					<ul>
						<li>
							<p>fix ui/input/keyboard: make handling of arrow keys correct</p>
						</li>
						<li>
							<p>feat core/parser: add Unicode support</p>
						</li>
						<li>
							<p>mod ui/settings/timeout: replace the list with a text field</p>
						</li>
						<li>
							<p>opt lib/containers/concurrent-map: switch to a lock-free algorithm</p>
						</li>
						<li>
							<p>refactor server: split up the queryDatabase() method</p>
						</li>
						<li>
							<p>format: change the indentation method from spaces to tabs</p>
						</li>
					</ul>
				</section>
			</section>
			<section>
				<h3 align="center" id="commit-messages-body">
					<a href="#contents-commit-messages-body">Body</a>
				</h3>
				<p>
					A subject line is typically followed by a body which tells more about the commit in a relatively
					free form. This part of a commit message consists of an arbitrary number of paragraphs separated by
					an <strong>empty&nbsp;line</strong>. Here you can explain the <strong>reasons</strong> the commit
					had been prompted by, add <strong>technical&nbsp;details</strong> and (probably) place additional
					information.
				</p>
				<p>
					A body is <strong>less</strong> abstract than a subject line, so you are allowed to use raw
					filenames, not only architectural entities. However, avoid abusing this low level style - do
					<strong>not</strong> turn your commit message into pseudocode.
				</p>
			</section>
			<section>
				<h3 align="center" id="commit-messages-footer">
					<a href="#contents-commit-messages-footer">Footer</a>
				</h3>
				<p>
					A footer is used only for "<strong>Fix</strong>" commits to point to the problem being solved. Like
					a subject line, a footer occupies strictly <strong>one</strong> 72-column row. It consists of a
					<strong>hash&nbsp;sign</strong> (#), immediately followed by a number identifying the addressed
					issue: <strong>#123456</strong>.
				</p>
			</section>
		</section>
		<section>
			<h2 align="center" id="branching">
				<a href="#contents-branching">Branching</a>
			</h2>
			<section>
				<h3 align="center" id="branching-terminology">
					<a href="#contents-branching-terminology">Terminology</a>
				</h3>
				<p>
					Here is the basic set of terms needed to get started with Igor Gorlov's branching model. Additional
					terms will be introduced later during further explanation.
				</p>
				<dl>
					<dt><strong><u>Workable program</u></strong></dt>
					<dd>
						A program that <strong>compiles</strong> (if required), <strong>runs</strong> and
						<strong>passes all tests</strong> (if any).
					</dd>
					<dt><strong><u>Readable documentation</u></strong></dt>
					<dd>
						Unambiguous and consistent documentation which has <strong>no</strong> internal contradictions
						and/or incomplete sections, but (probably) still needs additions and/or improvements.
					</dd>
					<dt><strong><u>Solid state</u></strong></dt>
					<dd>
						A codebase is considered to be in a solid state when its program part (if present) is
						<strong>workable</strong> and its documentation part (if present) is <strong>readable</strong>.
					</dd>
					<dt><strong><u>Unstable state</u></strong></dt>
					<dd>
						A codebase is considered to be in an unstable state when either its program part is
						<strong>not</strong> workable or its documentation part is <strong>not</strong> readable.
					</dd>
					<dt><strong><u>Solid commit</u></strong></dt>
					<dd>A commit pointing to a codebase snapshot which is in a <strong>solid state</strong>.</dd>
					<dt><strong><u>Unstable commit</u></strong></dt>
					<dd>A commit pointing to a codebase snapshot which is in an <strong>unstable state</strong>.</dd>
					<dt><strong><u>Solid branch</u></strong></dt>
					<dd>A branch requiring <strong>every</strong> its commit to be <strong>solid</strong>.</dd>
					<dt><strong><u>Unstable branch</u></strong></dt>
					<dd>A branch on which <strong>unstable</strong> commits are permitted.</dd>
				</dl>
			</section>
			<section>
				<h3 align="center" id="branching-overview">
					<a href="#contents-branching-overview">Overview</a>
				</h3>
				<p>
					Every repository is built around the default branch called "<strong>dev</strong>". This is a
					<strong>solid</strong> branch, it represents the main stream of development. Ideally, the whole
					history of the project should be linearly stored on "dev" as a series of
					<strong>small and distinct</strong> commits.
				</p>
				<p>However, such scenario is often not viable in real world:</p>
				<ul>
					<li>
						<p id="branching-overview-issue1">
							The first obstacle comes from inherent complexity of any software which is larger than a
							code example from a beginners' manual. The more abstraction layers your project consists of,
							the harder it becomes both to retain a solid state and to keep commits compact
							simultaneously.
						</p>
					</li>
					<li>
						<p id="branching-overview-issue2">
							Another problem appears when the upcoming release is getting close. You have to perform
							several final touches before announcing a new version, but suddenly understand that those
							touches are really not needed on "dev" - they will hamper the future work. For example,
							there is absolutely no necessity to improve quality of visual design if you are planning to
							completely revisit the GUI right after the upcoming release.
						</p>
					</li>
				</ul>
				<p>
					The branching strategy covered in the remaining subsections proposes several workarounds for the
					issues listed above.
				</p>
			</section>
			<section>
				<h3 align="center" id="branching-encapsulation">
					<a href="#contents-branching-encapsulation">Encapsulation Branches</a>
				</h3>
				<p>
					To resolve the <a href="#branching-overview-issue1">first issue</a>, we add some kind of complexity
					management using temporary unstable branches (hereinafter -
					<strong>encapsulation&nbsp;branches</strong>). When a complex task rises, create a new branch, do
					all unstable work on it, then merge back into "dev", and finally delete the encapsulation branch.
				</p>
				<p>Despite that this process is very intuitive, a set of mandatory rules exists:</p>
				<ul>
					<li>
						<p>
							The branch name must be written in <strong>Git case</strong>. If the name is hierarchical,
							replace the separating slash (/) with a <strong>hyphen</strong> (-).
						</p>
						<table>
							<caption>Examples</caption>
							<tr>
								<th>Source hierarchical name</th>
								<th>Resulting branch name</th>
							</tr>
							<tr>
								<td>core/loader</td>
								<td>core-loader</td>
							</tr>
							<tr>
								<td>file-manager/search</td>
								<td>file-manager-search</td>
							</tr>
							<tr>
								<td>audio-formats/lossy/mp3</td>
								<td>audio-formats-lossy-mp3</td>
							</tr>
						</table>
					</li>
					<li>
						<p>
							A prefix denoting the type of the merge commit being planned must precede the branch name;
							the name and the prefix must be separated by a <strong>slash</strong> (/).
						</p>
						<table>
							<caption>Examples</caption>
							<tr>
								<td>Develop a new big class named "TextParser"</td>
								<td>feat/text-parser</td>
							</tr>
							<tr>
								<td>Refactor a "Network" module consisting of many classes</td>
								<td>refactor/network</td>
							</tr>
							<tr>
								<td>Rewrite a "Server" class which is a member of the "Network" module</td>
								<td>mod/network-server</td>
							</tr>
						</table>
					</li>
					<li>
						<p><strong>Always</strong> create a merge commit; avoid fast-forward merges.</p>
					</li>
					<li>
						<p>
							Provide the merge commit with an informative <a href="#commit-messages">message</a>; do
							<strong>not</strong> leave the default one.
						</p>
					</li>
					<li>
						<p>
							The abuse of encapsulation branches can lead to an overcomplicated repository structure; so,
							avoid creating them recursively in order to keep any encapsulation branch
							<strong>linear</strong>.
						</p>
					</li>
				</ul>
			</section>
			<section>
				<h3 align="center" id="branching-release">
					<a href="#contents-branching-release">Release Branches</a>
				</h3>
				<p>This addresses the <a href="#branching-overview-issue2">second issue</a>.</p>
			</section>
		</section>
	</main>
	<a href="#contents">Back to the table of contents</a>
</body>

</html>